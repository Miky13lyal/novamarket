{{ 'component-accordion.css' | asset_url | stylesheet_tag }}
{{ 'section-faq-accordion.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .faq-accordion-{{ section.id }} {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .faq-accordion-{{ section.id }} {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .faq-accordion-{{ section.id }} .faq-accordion__heading {
    text-align: {{ section.settings.heading_alignment }};
    margin-bottom: {{ section.settings.heading_spacing }}px;
  }

  .faq-accordion-{{ section.id }} .faq-accordion__subheading {
    text-align: {{ section.settings.heading_alignment }};
    max-width: {{ section.settings.content_width }}%;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: {{ section.settings.subheading_spacing }}px;
  }

  .faq-accordion-{{ section.id }} .accordion__item {
    border-color: {{ section.settings.border_color }};
  }

  .faq-accordion-{{ section.id }} .accordion__button {
    color: {{ section.settings.question_color }};
    background-color: {{ section.settings.question_background }};
  }

  .faq-accordion-{{ section.id }} .accordion__button[aria-expanded="true"] {
    background-color: {{ section.settings.question_active_background }};
  }

  .faq-accordion-{{ section.id }} .accordion__content {
    color: {{ section.settings.answer_color }};
    background-color: {{ section.settings.answer_background }};
  }

  .faq-accordion-{{ section.id }} .accordion__button::after {
    background-color: {{ section.settings.icon_color }};
  }

  .faq-accordion-{{ section.id }} .accordion__button::before {
    background-color: {{ section.settings.icon_color }};
  }
{%- endstyle -%}

<div class="faq-accordion faq-accordion-{{ section.id }} color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    {%- if section.settings.heading != blank -%}
      <h2 class="faq-accordion__heading {{ section.settings.heading_size }}">
        {{ section.settings.heading | escape }}
      </h2>
    {%- endif -%}

    {%- if section.settings.subheading != blank -%}
      <div class="faq-accordion__subheading rte">
        {{ section.settings.subheading }}
      </div>
    {%- endif -%}

    <div class="faq-accordion__container">
      <div class="accordion" data-accordion>
        {%- for block in section.blocks -%}
          {%- if block.settings.question != blank -%}
            <div class="accordion__item" {{ block.shopify_attributes }}>
              <button id="accordion-button-{{ section.id }}-{{ forloop.index }}" 
                      class="accordion__button" 
                      aria-expanded="false" 
                      aria-controls="accordion-content-{{ section.id }}-{{ forloop.index }}"
                      data-accordion-button>
                {{ block.settings.question | escape }}
              </button>
              <div id="accordion-content-{{ section.id }}-{{ forloop.index }}" 
                   class="accordion__content" 
                   role="region" 
                   aria-labelledby="accordion-button-{{ section.id }}-{{ forloop.index }}"
                   data-accordion-content>
                <div class="accordion__content-inner rte">
                  {{ block.settings.answer }}
                </div>
              </div>
            </div>
          {%- endif -%}
        {%- endfor -%}
      </div>
    </div>

    {%- if section.settings.button_label != blank -%}
      <div class="faq-accordion__button-wrapper">
        <a href="{{ section.settings.button_link | default: '#' }}" class="button button--primary">
          {{ section.settings.button_label | escape }}
        </a>
      </div>
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "FAQ avec accordéon",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "En-tête"
    },
    {
      "type": "text",
      "id": "heading",
      "default": "Questions fréquentes",
      "label": "Titre"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h2",
          "label": "Petit"
        },
        {
          "value": "h1",
          "label": "Moyen"
        },
        {
          "value": "h0",
          "label": "Grand"
        }
      ],
      "default": "h1",
      "label": "Taille du titre"
    },
    {
      "type": "richtext",
      "id": "subheading",
      "default": "<p>Retrouvez les réponses aux questions les plus fréquemment posées par nos clients.</p>",
      "label": "Sous-titre"
    },
    {
      "type": "range",
      "id": "content_width",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Largeur du contenu",
      "default": 70
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Alignement du texte",
      "options": [
        {
          "value": "left",
          "label": "Gauche"
        },
        {
          "value": "center",
          "label": "Centre"
        },
        {
          "value": "right",
          "label": "Droite"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "heading_spacing",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Espacement après le titre",
      "default": 20
    },
    {
      "type": "range",
      "id": "subheading_spacing",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Espacement après le sous-titre",
      "default": 40
    },
    {
      "type": "header",
      "content": "Bouton"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Contactez-nous",
      "label": "Label du bouton"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Lien du bouton"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Schéma de couleurs",
      "default": "background-1"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Couleur de la bordure",
      "default": "#e5e7eb"
    },
    {
      "type": "color",
      "id": "question_color",
      "label": "Couleur des questions",
      "default": "#111827"
    },
    {
      "type": "color",
      "id": "question_background",
      "label": "Arrière-plan des questions",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "question_active_background",
      "label": "Arrière-plan des questions actives",
      "default": "#f9fafb"
    },
    {
      "type": "color",
      "id": "answer_color",
      "label": "Couleur des réponses",
      "default": "#4b5563"
    },
    {
      "type": "color",
      "id": "answer_background",
      "label": "Arrière-plan des réponses",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Couleur des icônes",
      "default": "#6b7280"
    },
    {
      "type": "header",
      "content": "Espacement"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Marge supérieure",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Marge inférieure",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "question",
      "name": "Question",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "default": "Quelle est votre politique de retour ?",
          "label": "Question"
        },
        {
          "type": "richtext",
          "id": "answer",
          "default": "<p>Nous acceptons les retours sous 30 jours après la réception de votre commande. Pour être éligible à un retour, votre article doit être inutilisé et dans le même état que lorsque vous l'avez reçu.</p>",
          "label": "Réponse"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ avec accordéon",
      "blocks": [
        {
          "type": "question",
          "settings": {
            "question": "Quelle est votre politique de retour ?",
            "answer": "<p>Nous acceptons les retours sous 30 jours après la réception de votre commande. Pour être éligible à un retour, votre article doit être inutilisé et dans le même état que lorsque vous l'avez reçu.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "Quels sont les délais de livraison ?",
            "answer": "<p>Les délais de livraison varient en fonction de votre localisation. En général, les commandes sont traitées sous 1 à 2 jours ouvrables et livrées dans un délai de 3 à 7 jours ouvrables.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "Quels modes de paiement acceptez-vous ?",
            "answer": "<p>Nous acceptons les cartes de crédit/débit (Visa, Mastercard, American Express), PayPal, Apple Pay et Google Pay.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "Proposez-vous la livraison internationale ?",
            "answer": "<p>Oui, nous expédions dans le monde entier. Les frais de port et les délais de livraison varient en fonction de la destination.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "Comment puis-je suivre ma commande ?",
            "answer": "<p>Une fois votre commande expédiée, vous recevrez un e-mail de confirmation avec un numéro de suivi. Vous pourrez suivre votre colis en cliquant sur le lien de suivi fourni.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}

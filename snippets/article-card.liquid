{%- liquid
  assign show_image = show_image | default: true
  assign show_date = show_date | default: true
  assign show_author = show_author | default: false
  assign show_comments = show_comments | default: false
  assign show_excerpt = show_excerpt | default: true
  assign excerpt_word_count = excerpt_word_count | default: 20
  
  assign article_url = article.url
  assign article_title = article.title | escape
  assign article_excerpt = article.excerpt_or_content | strip_html | truncatewords: excerpt_word_count
  assign article_image = article.image
  assign article_date = article.published_at | time_tag: format: 'date'
  assign article_author = article.author
  assign article_comments_count = article.comments_count
  
  if article.comments_enabled? and article.comments_count > 0
    assign comments_text = 'blogs.article.comments_with_count' | t: count: article.comments_count
  else
    assign comments_text = 'blogs.article.comments' | t
  endif
-%}

<article class="article-card" aria-labelledby="Article-{{ article.id }}">
  {%- if show_image and article_image != blank -%}
    <div class="article-card__image-container">
      <a href="{{ article_url }}" class="article-card__image-link" aria-label="{{ article_title }}">
        {{ article_image | image_url: width: 800 | image_tag:
          loading: 'lazy',
          width: article_image.width,
          height: article_image.height,
          class: 'article-card__image',
          alt: article_image.alt | escape
        }}
      </a>
    </div>
  {%- endif -%}
  
  <div class="article-card__content">
    {%- if show_date or show_author or show_comments -%}
      <div class="article-card__meta">
        {%- if show_date -%}
          <span class="article-card__meta-item">
            <svg class="article-card__meta-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {{ article_date }}
          </span>
        {%- endif -%}
        
        {%- if show_author -%}
          <span class="article-card__meta-item">
            <svg class="article-card__meta-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {{ article_author }}
          </span>
        {%- endif -%}
        
        {%- if show_comments and article.comments_enabled? -%}
          <span class="article-card__meta-item">
            <svg class="article-card__meta-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3944 16.7117 18.3098 17.8992 16.9674 18.7293C15.6251 19.5594 14.0782 19.9994 12.5 20C11.1801 20.0034 9.87812 19.6951 8.7 19.1L3 21L4.9 15.3C4.30493 14.1219 3.99656 12.8199 4 11.5C4.00061 9.92176 4.44061 8.37485 5.27072 7.03239C6.10083 5.68992 7.28825 4.60536 8.7 3.90001C9.87812 3.30494 11.1801 2.99656 12.5 3.00001H13C15.0843 3.11499 17.053 3.99479 18.5291 5.47086C20.0052 6.94693 20.885 8.91563 21 11V11.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {{ comments_text }}
          </span>
        {%- endif -%}
      </div>
    {%- endif -%}
    
    <h3 class="article-card__title" id="Article-{{ article.id }}">
      <a href="{{ article_url }}" class="full-unstyled-link">
        {{ article_title }}
      </a>
    </h3>
    
    {%- if show_excerpt and article_excerpt != blank -%}
      <div class="article-card__excerpt">
        {{ article_excerpt }}
      </div>
    {%- endif -%}
    
    <a href="{{ article_url }}" class="article-card__link">
      {{ 'blogs.article.read_more' | t }}
      <svg class="article-card__link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
</article>
